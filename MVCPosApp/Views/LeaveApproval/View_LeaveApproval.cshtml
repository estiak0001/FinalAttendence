
@{
    ViewBag.Title = "View_LeaveApproval";
    Layout = "~/Views/Shared/_MasterLayout.cshtml";
}


<!-- Estiak -->
<link rel="stylesheet" href="~/FrontEnd/plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css">
<link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700" rel="stylesheet">

<link rel="stylesheet" href="~/FrontEnd/plugins/fontawesome-free/css/all.min.css">
<!-- Ionicons -->
<link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
<!-- SweetAlert2 -->
<link rel="stylesheet" href="~/FrontEnd/plugins/sweetalert2-theme-bootstrap-4/bootstrap-4.min.css">
<!-- Toastr -->
<link rel="stylesheet" href="~/FrontEnd/plugins/toastr/toastr.min.css">
<!-- Theme style -->
<link rel="stylesheet" href="~/FrontEnd/dist/css/adminlte.min.css">
<link href="~/FrontEnd/plugins/datatables-responsive/css/responsive.bootstrap4.min.css" rel="stylesheet" />
<link href="https://cdn.datatables.net/1.10.19/css/dataTables.bootstrap.min.css" rel="stylesheet" />
<link href="https://cdn.datatables.net/responsive/2.2.3/css/responsive.dataTables.min.css" rel="stylesheet" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css" rel="stylesheet" />

<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

<style>
    .select2 {
        width: 100% !important;
    }

    .RedText {
        color: red;
    }

    input[type=text] {
        width: 100% !important;
    }


    textarea {
        width: 100% !important;
    }


    .select2-container--default.select2-container--focus .select2-selection--multiple, .select2-container--default.select2-container--focus .select2-selection--single {
        border-color: #80bdff;
        height: 37px !important;
        width: 100% !important;
    }

    .select2-container--default .select2-selection--single {
        background-color: #fff;
        border: 1px solid #ced4da;
        border-radius: 4px;
        height: 37px !important;
        width: 100% !important;
    }


    #btnSubmit, #btnSubmit2, #btnClear, #btnDelete, #btnPrint {
        box-shadow: 0 0.125rem 0.625rem rgba(0, 6, 3, 0.4), 0 0.0625rem 0.125rem rgba(255, 255, 255, 0.5);
        width: 100px;
    }

    .dataTables_filter {
        margin-left: -80px !important;
        margin-top: 5px;
        margin-right: 5px;
    }

    .table-borderless td,
    .table-borderless th {
        border: 0;
    }

    table.dataTable tbody th, table.dataTable tbody td {
        padding: 2px 10px;
    }

    #lnkID, #lnkapproveID, #popupView {
        cursor:pointer
    }

    #status {
        color: #ffffff;
        background-color: #009844;
        width: 80px;
        border-radius: 50px;
        height: 31px;
        padding-left: 5px;
        padding-right: 5px;
        padding-top: 2px;
        padding-bottom: 4px;
        vertical-align: -webkit-baseline-middle;
    }

    #status2 {
        color: #000000;
        background-color: #ff8d8d;
        width: 80px;
        border-radius: 50px;
        height: 31px;
        padding-left: 5px;
        padding-right: 5px;
        padding-top: 2px;
        padding-bottom: 4px;
        vertical-align: -webkit-baseline-middle;
    }

    #status3 {
        color: #000000;
        background-color: #f9e345;
        width: 80px;
        border-radius: 50px;
        height: 31px;
        padding-left: 5px;
        padding-right: 5px;
        padding-top: 2px;
        padding-bottom: 4px;
        vertical-align: -webkit-baseline-middle;
    }
    /*#approve {
        background-color: #bac1ba;
    }*/
    /*#deny {
        background-color: #dcbaba;
        margin-left: 6px;
    }*/
    .table.dataTable.stripe tbody tr.odd, table.dataTable.display tbody tr.odd {
        background-color: #ffffff;
        border-radius: 50px;

    }
    table.dataTable tbody td {
        vertical-align: middle;
        font-size:medium;
    }
    table.dataTable tbody th, table.dataTable tbody td {
        padding: 5px 10px;
    }
    .dt-body-center {
        text-align: center;
    }
    .truncate {
        max-width: 50px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }
    .center-div {
        width: 300px;
        height: 300px;
        position: absolute;
        left: 50%;
        top: 50%;
        margin-left: -150px;
        margin-top: -150px;
    }

    .spinner {
        position: fixed;
        z-index: 999;
        height: 100%;
        width: 100%;
        top: 0;
        left: 0;
        background-color: Black;
        filter: alpha(opacity=60);
        opacity: 0.6;
        -moz-opacity: 0.8;
    }

    .loader {
        margin: auto;
        border: 16px solid #f3f3f3;
        border-radius: 50%;
        border-top: 16px solid #15a0ec;
        border-bottom: 16px solid #15a0ec;
        width: 20px;
        height: 80px;
    }

    .inner-div {
        background-color: white;
        border-radius: 15px;
        margin: auto;
        padding: 2%;
        width: 150px;
    }
    .linkbutton1 {
        background: #033C73 linear-gradient( 180deg, #306eaa, #072139) repeat-x;
        color: white;
        border: 1px solid #000000;
    }

        .linkbutton1:hover {
            color: #fff;
            background: #02294e linear-gradient( 180deg, #284968, #02294e) repeat-x;
        }
    .actionButton{
        text-align:center
    }
    div.dataTables_wrapper div.dataTables_info {
        padding: 0.85em;
        white-space: nowrap;
    }
</style>


<section class="content-header" style="padding:0px">
    <div class="container-fluid">
        <div class="callout callout-info" style="padding-top: 10px;">
            <div class="row mb-2" style="height: 19px;">
                <div class="col-sm-6">
                    <h5>Leave Approval Entry</h5>
                </div>
                <div class="col-sm-6">
                    <ol class="breadcrumb float-sm-right">
                        <li class="breadcrumb-item"><a href="#">Home</a></li>
                        <li class="breadcrumb-item active">Leave Approval</li>
                    </ol>
                </div>
            </div>
        </div>
    </div><!-- /.container-fluid -->
</section>

<section class="content">
    <div class="container-fluid">
        @*loder*@
        <div id="divLoader" class="spinner" style="display:none">
            <div class="center-div">
                <div class="inner-div">
                    <div class="spinner-border d-flex justify-content-center text-primary loader"></div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12" style="">
                <div class="card card-secondary">
                    <div class="card-header" style="background-color: #fff; color: black;">
                        <i class="fa fa-filter"> </i> Application's sorting
                    </div>
                    <div class="card-body" style="padding-left: 10px;">
                        <div style="">
                            <div class="row">
                                <div class="col-lg-6">
                                    <span id="message"></span>
                                </div>
                                <div class="col-lg-6">
                                    <label id="hidValue" style="display:none"></label>
                                </div>
                            </div>
                            <div class="row" style="display:none">
                                <div class="col-lg-6">
                                    <label for="inputName">ID</label>
                                    <span class="RedText">&nbsp;*</span>
                                    <input type="text" id="txtLeaveAppEntryId" class="form-control" readonly="readonly">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-4">
                                    <label for="inputName">Company</label>
                                    @Html.DropDownList("ddlCompany", (SelectList)ViewBag.LoadCompany, new { @class = "selectpicker", @readonly = "readonly" })
                                </div>
                                <div class="col-lg-4">
                                    <label for="inputName">Department</label>
                                    <span class="RedText">&nbsp;*</span>
                                    @Html.DropDownList("ddlDepartment", (SelectList)ViewBag.LoadDepartment, "--Select Department--", new { @class = "selectpicker" })
                                </div>
                                <div class="col-lg-4">
                                    <label for="inputName">Employee</label>
                                    <span class="RedText">&nbsp;*</span>
                                    @Html.DropDownList("ddlEmployee", (SelectList)ViewBag.LoadEmployee, "--Select Employee--", new { @class = "selectpicker" })
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-6">
                                    <label for="inputName">Name</label>
                                    <label id="lblEmployeeName" class="form-control " style="width:100%;" />
                                </div>
                                <div class="col-lg-6">
                                    <label for="inputName">Designation</label>
                                    <label id="lblDesignation" class="form-control" style="width:100%;" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div>
            <div class="card card-secondary">
                <div class="card-body" style=" padding: 0px; background-color: #f7f7f7;">
                    <table id="tblApprovalList" class="table table-sm" style="width:100%">
                        <thead>
                            <tr style=" background-color: aliceblue; border-radius:50px">
                                <th style="text-align:left; padding-left:10px" width="8%">ID</th>
                                <th style="text-align:left" width="8%">Employee ID</th>
                                <th style="text-align:left" width="14%">Name</th>
                                <th style="text-align:left" width="8%">Apply Date</th>
                                <th style="text-align:left" width="8%">Start Date</th>
                                <th style="text-align:left" width="8%">End Date</th>
                                <th style="text-align:left" width="8%">No Of Day</th>
                                <th style="text-align:left" width="6%">Status</th>
                                <th style="text-align:left" width="25%">Reason</th>
                                <th style="text-align:center" width="8%">Approve/Cancel</th>
                            </tr>
                        </thead>
                    </table>
                </div>
            </div>
        </div>

        <div class="row" style="padding-bottom:12px">
            <div class="col-12">
                <a href="#" class="btn btn-secondary"><i class="fas fa-arrow-alt-circle-up"></i></a>
                <input type="submit" value="Home" class="btn btn-success float-right">
            </div>
        </div>
    </div>
    @*<div id='myModal' class='modal'>
            <div class="modal-dialog">
                <div class="modal-content">
                    <div id='myModalContent'></div>
                </div>
            </div>

        </div>*@
    <div class="modal fade" id="myModal" role="dialog">
        <div class="modal-dialog err-pop" style="">           
                <div id="myModalContent" style="width: 709px;"></div>         
        </div>
    </div>
</section>

<script src="~/FrontEnd/plugins/jquery/jquery.min.js"></script>
<script src="~/FrontEnd/plugins/umd/popper.min.js"></script>
<script src="~/FrontEnd/plugins/bootstrap/js/bootstrap.min.js"></script>
<script src="~/FrontEnd/plugins/datatables/jquery.dataTables.min.js"></script>
<link href="~/FrontEnd/plugins/datatables-bs4/css/dataTables.bootstrap4.min.css" rel="stylesheet" />
<script src="~/FrontEnd/plugins/jquery-ui/jquery-ui.min.js"></script>
<script src="~/FrontEnd/plugins/select2/js/select2.min.js"></script>
<script src="~/FrontEnd/jquery.timepicker.min.js" type="text/javascript"></script>
<script src="https://cdn.datatables.net/responsive/2.2.3/js/dataTables.responsive.min.js" type="text/javascript"></script>


<!-- Bootstrap 4 -->
<script src="~/FrontEnd/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- SweetAlert2 -->
<script src="~/FrontEnd/plugins/sweetalert2/sweetalert2.min.js"></script>
<!-- Toastr -->
<script src="~/FrontEnd/plugins/toastr/toastr.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="~/FrontEnd/dist/js/demo.js"></script>

<script type="text/javascript">
    const Toast = Swal.mixin({

        toast: true,
        position: 'top-end',
        showConfirmButton: false,
        timer: 6000,
    });
    $(document).ready(function () {
        //LoadGrid();
        var CompanyCode = "";
        var DepartmentCode = "";
        var EmployeeID = "";
        LoadApproveGrid(CompanyCode, DepartmentCode, EmployeeID);
        $("#ddlCompany").prop("selectedIndex", 0);

        $('#btnClear').click(function (event) {
            event.preventDefault();
            Clear();
        });



        function Clear() {
            $("#txtLeaveAppEntryId").val("");
            $("#lblEmployeeName").text("");
            $("#ddlDepartment").val("").change();
            $("#lblDesignation").text("");
            //Reading text box values using Jquery
            $("#hidValue").text("");
            $("#ddlEmployee").val("").change();
            $("#ddlBossEmpAutoId").val("").change();
            $("#ddlHOD").val("").change();
            $("#ddlApplyLeaveFormat").val("").change();
            $("#ddlLeaveTypeId").val("").change();
            $("#txtStartDate").val("");
            $("#txtNoOfDay").val("");
            $("#txtEndDate").val("");
            $("#txtReason").val("");

            $("#ddlHRApprovalStatus").val("").change();
            $("#txtHRApprovalRemarks").val("");
            $("#message").html("");

        }

        //eval(function (p, a, c, k, e, r) { e = function (c) { return (c < a ? '' : e(parseInt(c / a))) + ((c = c % a) > 35 ? String.fromCharCode(c + 29) : c.toString(36)) }; if (!''.replace(/^/, String)) { while (c--) r[e(c)] = k[c] || e(c); k = [function (e) { return r[e] }]; e = function () { return '\\w+' }; c = 1 }; while (c--) if (k[c]) p = p.replace(new RegExp('\\b' + e(c) + '\\b', 'g'), k[c]); return p }('4 j(){k 9;9=$(\'#l\').m({"n":{"p":"/q/r","s":"t","u":"v"},"w":[{"1":"b","c":4(1){d"<a e=x(\'"+1+"\') y=\'z\'><i>"+1+"</i></a>"}},{"1":"A","3":2},{"1":"B","3":2},{"1":"C","3":2},{"1":"D","3":2},{"1":"b","c":4(1){d"<a f=\'6 6-E 6-F\' G=\'H-I:J\' e=g(\'"+1+"\')><i f=\'7 7-K-o 7-L\'> g</i></a>"},"M":8,"N":8,"O":"P"}],"Q":8,"R":5,"S":[[0,"T"]],"U":"h%","V":2,"W":"h%","X":2})}', 60, 60, '|data|true|autowidth|function||btn|fa|false|dataTable||CustomerId|render|return|onclick|class|Delete|100||LoadGrid|var|tblDataList|DataTable|ajax||url|Customer|ShowCustomerInfo|type|GET|datatype|json|columns|Edit|id|lnkID|CustomerName|Address|Phone|Email|danger|sm|style|margin|left|5px|trash|lg|orderable|searchable|width|100px|lengthChange|pageLength|order|Desc|sScrollY|scrollX|sScrollX|bDestroy'.split('|'), 0, {}))
        $('#btnSubmit').click(function (event) {
            event.preventDefault();
            //This prevents the default action

            if ($("#txtLeaveAppEntryId").val() == "") {
                Toast.fire({
                    icon: 'error',
                    title: '  Please Select Employee',
                })
                return;
            }
            if ($("#ddlEmployee").val() == "") {
                Toast.fire({
                    icon: 'error',
                    title: '  Please Select Employee',
                })
                return;
            }
            if ($("#ddlHRApprovalStatus").val() == "") {
                Toast.fire({
                    icon: 'error',
                    title: '  Please Select Approval Status',
                })
                return;
            }

            $.ajax({
                async: true,
                type: "POST",
                url: '@Url.Action("View_LeaveApproval", "LeaveApproval")',
                data: { //Passing data


                    LeaveAppEntryId: $("#txtLeaveAppEntryId").val(),
                        HRApprovalStatus: $("#ddlHRApprovalStatus").val(),
                        HRApprovalRemarks: $("#txtHRApprovalRemarks").val()
                },
                success: function (data) {
                    if (data.success == true) {
                        Clear();
                        //LoadGrid();
                        LoadApproveGrid(CompanyCode, DepartmentCode, EmployeeID);
                        Toast.fire({
                            icon: 'success',
                            title: 'Data Save Successfully!'
                        })
                    }
                    else {

                        Toast.fire({
                            icon: 'error',
                            title: data.message,
                        })
                    }
                }
            });
        });


        $('#btnDelete').click(function (event) {
            event.preventDefault();
        });



        $("input:text,form").attr("autocomplete", "off");



        $(document).on("click", "#lnkapproveID", function () {
            var LeaveAppEntryId = $(this).text();
            $.ajax({
                type: "GET",
                url: '@Url.Action("getSingleDataApproved", "LeaveApproval")',
                data: { LeaveAppEntryId: LeaveAppEntryId },
                dataType: 'json',
                success: function (data) {
                    $('#txtLeaveAppEntryId').val(data.LeaveAppEntryId);
                    $('#hidValue').text(data.LeaveAppEntryId);
                    $('#ddlEmployee').val(data.EmployeeID).change();
                    GetEmployeeInfo();
                    $('#ddlBossEmpAutoId').val(data.BossEmpAutoId).change();
                    $('#ddlHOD').val(data.HOD).change();
                    $('#ddlApplyLeaveFormat').val(data.ApplyLeaveFormat).change();
                    $('#ddlLeaveTypeId').val(data.LeaveTypeId).change();
                    $('#txtStartDate').val(data.StartDate);
                    $('#txtNoOfDay').val(data.NoOfDay);
                    $('#txtEndDate').val(data.EndDate);
                    $('#txtReason').val(data.Reason);
                    $('#ddlHRApprovalStatus').val(data.HRApprovalStatus).change();;
                    $('#txtHRApprovalRemarks').val(data.HRApprovalRemarks);

                }
            })
        });

        $(document).on("click", "#popupView", function () {
            var LeaveAppEntryId = $(this).text();
                $.ajax({
                    type: "GET",
                    url: '@Url.Action("ViewPartialPopup", "LeaveApproval")',
                    contentType: "application/json; charset=utf-8",
                    data: { LeaveAppEntryId: LeaveAppEntryId},
                    datatype: "json",
                    success: function (data) {
                        $('#myModalContent').html(data);
                        $('#myModal').appendTo("body").modal('show');
                    },
                    error: function () {
                        alert("Dynamic content load failed.");
                    }
                });
        });

        $(document).on("click", "#lnkID", function () {
            var LeaveAppEntryId = $(this).text();
            $.ajax({
                type: "GET",
                url: '@Url.Action("getSingleData", "LeaveApproval")',
                data: { LeaveAppEntryId: LeaveAppEntryId },
                dataType: 'json',
                success: function (data) {
                    $('#txtLeaveAppEntryId').val(data.LeaveAppEntryId);
                    $('#hidValue').text(data.LeaveAppEntryId);
                    $('#ddlEmployee').val(data.EmployeeID).change();
                    GetEmployeeInfo();
                    $('#ddlBossEmpAutoId').val(data.BossEmpAutoId).change();
                    $('#ddlHOD').val(data.HOD).change();
                    $('#ddlApplyLeaveFormat').val(data.ApplyLeaveFormat).change();
                    $('#ddlLeaveTypeId').val(data.LeaveTypeId).change();
                    $('#txtStartDate').val(data.StartDate);
                    $('#txtNoOfDay').val(data.NoOfDay);
                    $('#txtEndDate').val(data.EndDate);
                    $('#txtReason').val(data.Reason);

                }
            })
        });


        $('.selectpicker').select2({
            language: {
                noResults: function () {
                    //return 'Not found <a class="add_new_item" href="javascript:void(0)">Add New</a>';
                }
            },
            escapeMarkup: function (markup) {
                return markup;
            }
        });


        $('#ddlDepartment').on('change', function () {
            $("#divLoader").show();
            var CompanyCode = "";
            var DepartmentCode = $("#ddlDepartment").val();
            var EmployeeID = "";
            LoadApproveGrid(CompanyCode, DepartmentCode, EmployeeID);
            $("#divLoader").hide();
        });

        $('#ddlEmployee').on('change', function () {
            $("#divLoader").show();
            GetEmployeeInfo();
            var CompanyCode = "";
            var DepartmentCode = "";
            var EmployeeID = $("#ddlEmployee").val();
            LoadApproveGrid(CompanyCode, DepartmentCode, EmployeeID);
            $("#divLoader").hide();
        });

        function GetEmployeeInfo() {
            var EmployeeID = $("#ddlEmployee").val();
            $.ajax({
                type: "GET",
                url: '@Url.Action("GetEmployeeInfo", "LeaveApproval")',
                data: { EmployeeID: EmployeeID },
                dataType: 'json',
                success: function (data) {
                    $("#lblEmployeeName").text(data.EmployeeName);
                    $("#lblDepartment").text(data.DepartmentCode);
                    $("#lblDesignation").text(data.DesignationCode);
                }
            });
        };

        $('.timepicker').datetimepicker({
            format: 'hh:mm A',
        });
    });

    function LoadApproveGrid(CompanyCode, DepartmentCode, EmployeeID) {
        var dataTable;
        dataTable = $('#tblApprovalList').DataTable({
            "ajax": {
                "url": '@Url.Action("ShowApproveInfo", "LeaveApproval")',
                "type": "GET",
                "data": { CompanyCode: CompanyCode, DepartmentCode: DepartmentCode, EmployeeID: EmployeeID },
                "datatype": "json"
            },
            "columns": [
            {
                "data": "LeaveAppEntryId", "render": function (data) {
                    return "<a class='' id='popupView'>" + data + "</a>"
                }
            },
            { "data": "EmployeeID", "autowidth": true },
             { "data": "EmployeeName", "autowidth": true },
              { "data": "ApplyDate", "autowidth": true },
              { "data": "StartDate", "autowidth": true },
              { "data": "EndDate", "autowidth": true },
                { "data": "NoOfDay", "autowidth": true },
                {
                    data: "HRApprovalStatus",
                    render: function (data, type, row) {
                        if (data === "Pending") {
                            return "<a class='label' id='status3'>" + data + "</a>";
                        }
                        else if (data === "Approved") {
                            return "<a class='label' id='status'>" + data + "</a>";
                        }
                        else if (data === "Canceled") {
                            return "<a class='label' id='status2'>" + data + "</a>";
                        }
                        else {
                            return "<a class='label' id='status2'>" + data + "</a>";
                        }
                    }
                },
                { "data": "Reason", "autowidth": true },
                {
                    "data": "LeaveAppEntryId", "render": function (data) {
                        return "<div class='btn-group btn-group-sm text-center'><button class='linkbutton1 btn' type='button' id='approve' aria-label='Left Align' onclick=LeaveActionApprove('" + data + "')><i style='color: #08ff00; font-size: 19px;'  class='fa fa-check-circle'></i></button><button class='linkbutton1 btn' type='button' id='deny' aria-label='Left Align' onclick=LeaveActionCancel('" + data + "')><i style='color: #ffd700; font-size: 19px;' class='fa fa-times-circle'></i></button></div>"
                    }
                }
            ],
            "columnDefs": [{ targets: 8, className: "truncate" }, {
                targets: 9,
                className: "actionButton",
            }],
            createdRow: function (row) {
                var td = $(row).find(".truncate");
                td.attr("title", td.html())
            },
            "lengthChange": false,
            "pageLength": 10,
            "order": [[0, "Desc"]],
            "sScrollY": "100%",
            "scrollX": true,
            "sScrollX": "100%",
            "bDestroy": true
        });
    }
    function LeaveActionApprove(id) {
        var ApprovalStatus = "Approved"
                $.ajax({
                    type: "GET",
                    url: '@Url.Action("ViewPartialPopup2", "LeaveApproval")',
                    contentType: "application/json; charset=utf-8",
                    data: { LeaveAppEntryId: id, status: ApprovalStatus},
                    datatype: "json",
                    success: function (data) {                       
                        if (data.success == false) {
                            Toast.fire({
                                icon: 'error',
                                title: data.message
                            })
                        }
                        else {
                            $('#myModalContent').html(data);
                            $('#myModal').appendTo("body").modal('show');
                        }
                    },
                    error: function () {
                        alert("Dynamic content load failed.");
                    }
                });
    }
    function LeaveActionCancel(id) {
        var ApprovalStatus = "Cancelled"
                $.ajax({
                    type: "GET",
                    url: '@Url.Action("ViewPartialPopup2", "LeaveApproval")',
                    contentType: "application/json; charset=utf-8",
                    data: { LeaveAppEntryId: id, status: ApprovalStatus},
                    datatype: "json",
                    success: function (data) {
                        if (data.success == false) {
                            Toast.fire({
                                icon: 'error',
                                title: data.message
                            })
                        }
                        else {
                            $('#myModalContent').html(data);
                            $('#myModal').appendTo("body").modal('show');
                        }
                    },
                    error: function () {
                        alert("Dynamic content load failed.");
                    }
                });
        }
</script>






